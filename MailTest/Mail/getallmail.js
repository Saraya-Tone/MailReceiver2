function receiveMail2 () {	var pop3 = require("waf-mail/POP3");	var allMails = [];//	var addr = "mail.tenko22.cher-ish.net"; //	var user = "test010@tenko22.cher-ish.net";//	var pass = "yashinomi2013";//	var port = 110;//	var isSSL = false;	var addr = "pop.gmail.com"; 	var user = "yashi.receiver01@gmail.com";	var pass = "yashinomi2013";	var port = 995;	var isSSL = true;	var attachedFilePath = "C:/Users/tone/Documents/Wakanda/attachedfiles/";	// message.messageParts[n].save(attachedFilePath,true);	var rc = pop3.getAllMail(addr, port , isSSL , user, pass, allMails ) 	;	// rc = pop3.getAllMailAndDelete(addr, port , isSSL , user, pass, allMails ) 	;	allMails.forEach( function(oneMail) {		var theMail = new ds.Mailbox(); 				var msgid = oneMail["Message-ID"];				var found = ds.Mailbox.find("messageID = :1",msgid);				if (found != null) return; // すでにメールがあれば以下の処理は実行しない 				theMail.messageID = msgid; 		theMail.s送信元 = oneMail["From"] ;		theMail.s件名 =  oneMail["Subject"] ;		date  = oneMail["Date"];		millseconds = Date.parse(date);		theMail.s送信日付 = new Date();		theMail.s送信日付.setTime(millseconds);  // Date.parse("Fri, 12 Apr 2013 15:45:43 +0900");		datewk = theMail.s送信日付;				theMail.isMIME = oneMail.isMIME();				if (theMail.isMIME == true ) {			var parts=oneMail.getMessageParts();			var aPart;     // メールのMIMEパート 			var mediaType; // MIME Type			var filename ; // 添付ファイル名						var len = parts.length;			for (i=0;i<len;i++) {					aPart = parts[i];				mediaType = aPart.mediaType;				filename =  aPart.fileName;				theMail.s本文 = theMail.s本文+"\n("+i+") Type="+mediaType+",filename="+filename;				if (mediaType == "text/plain") {					theMail.s本文 = theMail.s本文 + "\n"+ aPart.asText;				} 				if (filename == "DATA.ZIP" ) {					aPart.save(attachedFilePath,true);				}			};		} else {				var body = oneMail.getBody();			theMail.s本文 = body.join("\n");		}				theMail.save();		});		return;}receiveMail2();