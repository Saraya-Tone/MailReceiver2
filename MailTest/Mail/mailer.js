var pop3 = require('waf-mail/POP3'); var mail = require('waf-mail/mail');var username = 'test010@tenko22.cher-ish.net'; // enter a valid account herevar password = 'yashinomi2013'; // enter a valid password herevar addr = "mail.tenko22.cher-ish.net"; var port = 110;var isSSL = false;var username =  'receiver@saraya.com'; // enter a valid account herevar password = 'password'; // enter a valid password herevar addr = 'post2.saraya.com'; var port = 110;var isSSL = false;//var addr = "pop.gmail.com"; //var username = "yashi.receiver01@gmail.com";//var password = "yashinomi2013";//var port = 995;//var isSSL = true;var toread = new pop3.POP3(); // create a new POP3 object//var theMail = new mail.Mail();toread.connect(addr, port, isSSL, function (isOk, response) {     if (!isOk) {        close();        console.log('*** Connection Error ***');        return;    }    // Authentication is required first       toread.authenticate(username, password, function (isOk, response) {        if (!isOk) {                        close();            console.log('*** Login Error ***');            return;                  }        // We want the last available email                toread.getStatus(function(isOk, response, numberMessages, totalSize) {            if (!isOk) {                                close();                return;                            }                                console.log('*** Login success! ***'+numberMessages + ' messages, total size of ' + totalSize + ' octets.');        		var i;  //    		for (i=1; i<=numberMessages; i++) {				var n=numberMessages-0;	            toread.retrieveMessage(n, function (isOk, oneMail) {	                if (isOk) {    	                       	                    var len = oneMail.length;	//                    console.log('**len ='+len);						var theMail = new mail.Mail();	                    theMail.parse(oneMail,1,len);	                    var subject =  theMail["Subject"] ; 	                    var maildate = theMail["Date"];	                    console.log('**maildate ='+maildate+' '+len+' '+n+'\n');	                                                  	                }             	            }); // end retrieveMessage 	            	            wait(5000);	            	            var n=numberMessages-1;	            toread.retrieveMessage(n, function (isOk, oneMail) {	                if (isOk) {    	                       	                    var len = oneMail.length;						var theMail = new mail.Mail();						theMail.parse(oneMail,1,len);	                    var subject =  theMail["Subject"] ; 	                    var maildate = theMail["Date"];	                    console.log('**maildate ='+maildate+' '+len+' '+n+'\n');	                                                  	                }               	            }); 	           	            wait(5000);	            exitWait();	            	            //	         } // end for loop  	            	              //	         close();          });    });    });wait(11000);toread.quit();